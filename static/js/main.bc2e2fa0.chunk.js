(this.webpackJsonptodos=this.webpackJsonptodos||[]).push([[0],{17:function(e,t,n){},18:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(19),r=n.n(s),i=(n(26),n(4)),l=n(20),o=n(2),u=n(21),d=(n(27),n(7)),j=n.n(d);function b(e){return{country:e.country,city:e.city,latitude:e.latitude,longitude:e.longitude,timezone:e.timezone,timezone_gmt:e.timezone_gmt,timezone_gmtOffset:e.timezone_gmtOffset}}var f=function(){return j.a.get("http://ipwhois.app/json/").then((function(e){return e.data})).then(b)};function m(e){return(e/1e3/60/60).toFixed(2)}function O(e){return e.getHours()+e.getMinutes()/60}function h(e){var t=p(e.sunrise),n=p(e.sunset),c=function(e,t){var n=t-e;return new Date(e.valueOf()+n/2)}(t,n),a=function(e,t){var n=new Date(t);n.setDate(t.getDate()-1);var c=e-n;return new Date(e.valueOf()-c/2)}(t,n);return{night:O(t)-m(t-a)/2,dawn:O(c)-m(c-t)/2,day:O(n)-m(c-t)/2,dusk:O(n)+m(t-a)/2}}function p(e){var t=new Date;return new Date(t.toISOString().split("T")[0]+" "+e+" UTC")}var v=function(e){var t=e.latitude,n=e.longitude;return j.a.get("https://api.sunrise-sunset.org/json",{params:{lat:t,lng:n,date:"today"}}).then((function(e){return e.data.results})).then(h)},g=(n(46),n(0));var x=function(e){var t=Object(c.useState)(null),n=Object(o.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(null),i=Object(o.a)(r,2),l=i[0],u=i[1],d=new Date,j="header";return d&&l&&(j+=function(e,t){var n;e<t.night||e>=t.dusk?n="night":e<t.dawn?n="dawn":e<t.day?n="day":e<t.dusk&&(n="dusk");return" "+n}(O(d),l)),Object(c.useEffect)((function(){f().then((function(e){return s(e)}))}),[]),Object(c.useEffect)((function(){a&&v(a).then((function(e){return u(e)}))}),[a]),Object(g.jsxs)("header",{className:j,children:[Object(g.jsx)("h1",{children:"Manage your day"}),a&&Object(g.jsxs)("p",{children:[" Location: ",a.city,", ",a.country]})]})};var N=function(e){var t=Object(c.useRef)();return Object(c.useEffect)((function(){t.current=e})),t.current};function k(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return t?e+" "+n:e}n(17);var y=function(e){var t=e.onSubmit,n=Object(c.useState)(!1),a=Object(o.a)(n,2),s=a[0],r=a[1],i=Object(c.useState)(""),l=Object(o.a)(i,2),u=l[0],d=l[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),f=b[0],m=b[1],O=Object(c.useRef)(null),h=Object(c.useRef)(null),p=N(s);return Object(c.useEffect)((function(){!p&&s&&O.current.focus(),p&&!s&&h.current.focus()}),[p,s]),Object(g.jsxs)("form",{className:"stack-small",onSubmit:function(e){if(e.preventDefault(),s){if(0===u.length)return m("A task name should be at least one character long"),void O.current.focus();m(null),t(u),d(""),r(!1)}else r(!0)},children:[Object(g.jsx)("label",{htmlFor:"new-todo-input",className:k("label__lg short",s,"invisible"),children:"Need to add more?"}),Object(g.jsxs)("div",{className:k("input-group",!s,"invisible"),children:[Object(g.jsx)("input",{type:"text",id:"new-todo-input",className:k("input input__lg",f,"input__error"),name:"text",placeholder:"New task",autoComplete:"off",value:u,ref:O,onChange:function(e){d(e.target.value)}}),Object(g.jsx)("p",{className:"input__error-message",children:f})]}),Object(g.jsxs)("div",{className:k("btn-group",!s,"flex-short"),children:[s&&Object(g.jsxs)("button",{type:"button",className:"btn todo-cancel",onClick:function(){r(!1)},children:["Cancel",Object(g.jsx)("span",{className:"visually-hidden",children:"creating new task"})]}),Object(g.jsx)("button",{type:"submit",className:"btn btn__primary btn__lg",ref:h,children:"Add"})]})]})};n(18);var _=function(e){var t=e.name,n=e.isPressed,c=e.setFilter;return Object(g.jsxs)("button",{type:"button",className:"btn toggle-btn","aria-pressed":n,onClick:function(){return c(t)},children:[Object(g.jsx)("span",{className:"visually-hidden",children:"Show "}),Object(g.jsxs)("span",{children:[t," "]}),Object(g.jsx)("span",{className:"visually-hidden",children:" tasks"})]})};var w=function(e){var t=e.filterNames,n=e.currentFilter,c=e.setFilter;return Object(g.jsx)("div",{className:"filters btn-group stack-exception",children:t.map((function(e){return Object(g.jsx)(_,{name:e,isPressed:e===n,setFilter:c},e)}))})};var S=function(e){var t=e.id,n=e.name,a=e.toggleEditMode,s=e.onEdit,r=e.editFieldRef,i=Object(c.useState)(""),l=Object(o.a)(i,2),u=l[0],d=l[1],j=Object(c.useState)(null),b=Object(o.a)(j,2),f=b[0],m=b[1];return Object(g.jsxs)("form",{className:"stack-small",onSubmit:function(e){if(e.preventDefault(),!u||u===n)return m("A task name should be at least one character long"),void r.current.focus();s(t,u),d(""),a()},children:[Object(g.jsxs)("div",{className:"input-group",children:[Object(g.jsxs)("label",{className:"todo-label",htmlFor:t,children:["New name for ",n]}),Object(g.jsx)("input",{id:t,className:k("input input__sm",f,"input__error"),type:"text",value:u,onChange:function(e){d(e.target.value)},ref:r}),Object(g.jsx)("p",{className:"input__error-message",children:f})]}),Object(g.jsxs)("div",{className:"btn-group",children:[Object(g.jsxs)("button",{type:"button",className:"btn todo-cancel",onClick:a,children:["Cancel",Object(g.jsxs)("span",{className:"visually-hidden",children:["renaming ",n]})]}),Object(g.jsxs)("button",{type:"submit",className:"btn btn__primary todo-edit",children:["Save",Object(g.jsxs)("span",{className:"visually-hidden",children:["new name for ",n]})]})]})]})};var C=function(e){var t=e.id,n=e.name,c=e.completed,a=e.onComplete,s=e.onDelete,r=e.toggleEditMode,i=e.editButtonRef;return Object(g.jsxs)("div",{className:"inline-small",children:[Object(g.jsxs)("div",{className:"c-cb short",children:[Object(g.jsx)("input",{id:t,type:"checkbox",defaultChecked:c,onChange:function(){return a(t)}}),Object(g.jsx)("label",{className:"todo-label",htmlFor:t,children:n})]}),Object(g.jsxs)("div",{className:"btn-group short",children:[Object(g.jsxs)("button",{type:"button",className:"btn",onClick:r,ref:i,children:["Edit ",Object(g.jsx)("span",{className:"visually-hidden",children:n})]}),Object(g.jsxs)("button",{type:"button",className:"btn btn__danger",onClick:function(){return s(t)},children:["Delete ",Object(g.jsx)("span",{className:"visually-hidden",children:n})]})]})]})};n(48);var E=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],s=n[1],r=N(a),l=Object(c.useRef)(null),u=Object(c.useRef)(null);function d(){s(!a)}return Object(c.useEffect)((function(){!r&&a&&l.current.focus(),r&&!a&&u.current.focus()}),[r,a]),Object(g.jsx)("li",{className:"todo",children:a?Object(g.jsx)(S,Object(i.a)(Object(i.a)({},e),{},{toggleEditMode:d,editFieldRef:l})):Object(g.jsx)(C,Object(i.a)(Object(i.a)({},e),{},{toggleEditMode:d,editButtonRef:u}))})};var F=function(e){var t=e.tasks,n=e.filterFunction,s=e.onTaskComplete,r=e.onTaskDelete,i=e.onTaskEdit,l=Object(c.useRef)(null),o=N(t.length);return Object(c.useEffect)((function(){t.length-o===-1&&l.current.focus()}),[t.length,o]),Object(g.jsxs)(a.a.Fragment,{children:[Object(g.jsxs)("h2",{id:"list-heading",tabIndex:"-1",ref:l,children:[t.length," ",1!==t.length?"tasks":"task"," remaining,\xa0",t.filter((function(e){return!e.completed})).length," incomplete"]}),Object(g.jsx)("ul",{className:"todo-list stack-large stack-exception","aria-labelledby":"list-heading",children:t.filter(n).map((function(e){return Object(g.jsx)(E,{id:e.id,name:e.name,completed:e.completed,onComplete:s,onDelete:r,onEdit:i},e.id)}))})]})},D={All:function(){return!0},Active:function(e){return!e.completed},Completed:function(e){return e.completed}},R=Object.keys(D);var T=function(e){var t=Object(c.useState)(e.tasks),n=Object(o.a)(t,2),s=n[0],r=n[1],d=Object(c.useState)("All"),j=Object(o.a)(d,2),b=j[0],f=j[1];return Object(g.jsxs)(a.a.Fragment,{children:[Object(g.jsx)(x,{}),Object(g.jsxs)("main",{className:"todoapp stack-large",children:[Object(g.jsx)(y,{onSubmit:function(e){var t={id:"todo-"+Object(u.a)(),name:e,completed:!1};r([].concat(Object(l.a)(s),[t]))}}),Object(g.jsx)(w,{filterNames:R,currentFilter:b,setFilter:f}),Object(g.jsx)(F,{tasks:s,setTasks:r,filterFunction:D[b],onTaskComplete:function(e){var t=s.map((function(t){return e===t.id?Object(i.a)(Object(i.a)({},t),{},{completed:!t.completed}):t}));r(t)},onTaskDelete:function(e){var t=s.find((function(t){return e!==t.id}));if(t){var n=t&&t.name;if(window.confirm("This will delete ".concat(n,". Proceed?"))){var c=s.filter((function(t){return e!==t.id}));r(c)}}},onTaskEdit:function(e,t){var n=s.map((function(n){return e===n.id?Object(i.a)(Object(i.a)({},n),{},{name:t}):n}));r(n)}})]})]})};r.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(T,{tasks:[{id:"todo-0",name:"Eat",completed:!0},{id:"todo-1",name:"Sleep",completed:!1},{id:"todo-2",name:"Repeat",completed:!1}]})}),document.getElementById("root"))}},[[49,1,2]]]);